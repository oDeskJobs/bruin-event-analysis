#:kivy 1.5.1

#:set bg_color (.8, .8, .8)
#:set box_color (.7, .7, .7)
#:set txt_color (0, 0, 0, 1)
#:set header_height 24
#:set grid_spacing 7
#:set listbox_spacing 2



<MainView>:
    visualizer: visualizer
    canvas:
        Color:
            rgb: bg_color
        Rectangle:
            pos: root.pos
            size: root.size
    BoxLayout:
        pos: root.pos
        size: root.size
        orientation: 'vertical'
        padding: grid_spacing
        spacing: grid_spacing

        # layout containing the five list boxes on the top row
        BoxLayout:
            size_hint: (1, .33)
            orientation: 'horizontal'
            spacing: grid_spacing
            BoxWithHeader:
                title: "Sessions"
                size_hint: (.2,1)
            BoxWithHeader:
                title: "Subjects"
                size_hint: (.2, 1)
            BoxLayout:
                orientation: 'vertical'
                spacing: grid_spacing
                size_hint: (.6, 1)
                Header:
                    text: "Input Files"
                BoxLayout:
                    size_hint: (1, 1)
                    orientation: 'horizontal'
                    spacing: grid_spacing
                    BoxLayout:
                        orientation: 'vertical'
                        spacing: grid_spacing
                        size_hint: (.5, 1)
                        Header:
                            text: "Transients"
                        Button:
                            text: "Import sample (test)"
                            size_hint: (1, None)
                            on_release: root.load_transients()
                            height: header_height
                            background_color: (1,0,0,1)
                        ListBox:
                            size_hint: (1,1)
                    BoxLayout:
                        orientation: 'vertical'
                        spacing: grid_spacing
                        size_hint: (.5, 1)
                        Header:
                            text: "Behavior"
                        Button:
                            text: "Import sample (test)"
                            size_hint: (1, None)
                            on_release: root.load_behavior()
                            height: header_height
                            background_color: (1,0,0,1)
                        ListBox:
                            size_hint: (1,1)



        # layout containing the processing options
        BoxLayout:
            size_hint: (1, .33)
            orientation: 'vertical'
            spacing: grid_spacing
            Header:
                text: "Processing Options"
            BoxLayout:
                orientation: 'horizontal'
                spacing: grid_spacing
                BoxWithHeader2:
                    title: "Bout Identification"
                    size_hint: (.33, 1)
                BoxWithHeader:
                    title: "Transition Identification"
                    size_hint: (.33, 1)
                BoxWithHeader:
                    title: "Event Matching"
                    size_hint: (.33, 1)


        # layout containing the visualization panel
        Plot:
            id: visualizer
            size_hint: (1, .33)

<ListBox>:
    layout: layout
    ScrollView:
        size_hint: (None, None)
        size: root.size
        do_scroll_x: False
        scroll_distance: 3
        scroll_timeout: 50

        GridLayout:
            id: layout
            size_hint: (1, None)
            cols: 1
            spacing: listbox_spacing
            orientation: 'vertical'
            row_default_height: 30
            Button:
                text: 'Add Item'
                on_press: root.item_info()

<VariablesList>:
    size_hint: (1, None)
    cols: 1
    orientation: 'vertical'
    spacing: listbox_spacing
    row_default_height: 30

<VariableBox>:
    variable_list: variable_list
    ScrollView:
        size_hint: (None, None)
        size: root.size
        do_scroll_x: False
        scroll_distance: 3
        scroll_timeout: 50
        VariablesList:
            id: variable_list

            
<GetItemName>:
    BoxLayout:
        orientation: 'vertical'
        pos: root.pos
        size: root.size
        spacing: 10
        padding: 10
        Label:
            size_hint_y: .15
            font_size: root.size[1]*.08
            valign: 'middle'
            halign: 'left'
            #bold: True
            text: 'Please Enter Item Name:'
        TextInput:
            size_hint_y: .4
            multiline: False
            focus: True
            text: root.text
            on_text: root.text = args[1]
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: .4
            Widget:
                size_hint_x: .2
                size_hint_y: 1
            Button:
                text: 'OK'
                size_hint_x: .6
                size_hint_y: .9
                on_release: root.ok = True
            Widget:
                size_hint_x: .2
                size_hint_y: 1

<ItemSetup>:
    BoxLayout:
        pos: root.pos
        size: root.size
        orientation: 'horizontal'
        size_hint: (1, None)
        padding: 0
        spacing: 2
        Button:
            text: '-'
            on_press: root.remove_item()
            height: header_height
            width: 30
            size_hint: (None, None)
        Button:
            text: root.item_info
            on_press: root.item_callback()
            background_color: (0,0,1,1) if root.item_state=='down' else (1,1,1,1)
            height: header_height
            size_hint: (1, None)

[Header@Widget]:
    id: label_bg
    size_hint: (1, None)
    height: header_height
    canvas:
        Color:
            rgb: box_color
        Rectangle:
            pos: self.pos
            size: self.size
    Label:
        text: ctx.text
        color: txt_color
        pos: label_bg.pos
        size: label_bg.size

[BoxWithHeader@BoxLayout]:
    orientation: 'vertical'
    spacing: grid_spacing
    size_hint: ctx.size_hint
    Header:
        text: ctx.title
    ListBox:
        size_hint: (1,1)

[BoxWithHeader2@BoxLayout]:
    orientation: 'vertical'
    spacing: grid_spacing
    size_hint: ctx.size_hint
    Header:
        text: ctx.title
    VariableBox:
        size_hint: (1,1)